<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      .main {
        display: flex;
        flex-direction: column;
        gap: 2rem;
        background-color: #f2f2f2;
        padding: 2rem;
      }
      .container1 {
        display: flex;
        flex-direction: row;
        gap: 3rem;
        align-items: center;
        justify-content: space-around;
        border-radius: 1rem;
      }
      .product {
        display: flex;
        flex-direction: column;
        height: 20%;
        width: 80%;
        justify-content: space-between;
        align-items: center;
        border-radius: 1rem;
      }
      .item1 {
        height: 15rem;
        width: 12rem;
      }
      .item2 {
        background-color: #ffffff;
        height: 4rem;
        width: 12rem;
        display: flex;
        gap: 1px;
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
      }
      .item3 {
        background-color: #ffffff;
        height: 4rem;
        width: 12rem;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        border-bottom-left-radius: 1rem;
        border-bottom-right-radius: 1rem;
      }
      .kalam1 {
        height: 1rem;
        width: 4rem;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: justify;
      }
      .kalam2 {
        height: 1rem;
        width: 4rem;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: right;
      }
      .item3 > button {
        background-color: #3164f4;
        height: 2rem;
        width: 6rem;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        border-radius: 0.5rem;
        color: white;
        border: none;
        cursor: pointer;
      }
      .selected-container {
        display: flex;
        flex-direction: row;
        gap: 1rem;
        align-items: center;
        justify-content: space-around;
        border-radius: 1rem;
        padding: 1rem;
        margin-top: 1rem;
      }
      .selected-item {
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      .selected-item img {
        width: 6rem;
        height: 6rem;
        object-fit: cover;
      }
      .selected-item p {
        margin: 0.5rem 0;
      }
      .remove-button {
        background-color: #000000;
        color: white;
        border: none;
        border-radius: 100%;
        padding: 0.5rem;
        cursor: pointer;
        height: 2rem;
        width: 2rem;
        font-size: 1rem;
      }
      .total-container {
        display: flex;
        background-color: #e2e2e2;
        padding: 1rem;
        border-radius: 1rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
      }
      .item1 > img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
      p {
        font-family: "Gill Sans", "Gill Sans MT", Calibri, "Trebuchet MS",
          sans-serif;
      }
    </style>
  </head>
  <body>
    <div class="main">
      <div class="container1">
        <div class="product">
          <div class="item1">
            <img
              src="https://images.unsplash.com/photo-1505740420928-5e560c06d30e?q=80&w=1770&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
              alt=""
            />
          </div>
          <div class="item2">
            <div class="kalam1">
              <p>headset</p>
            </div>
            <div class="kalam2">
              <p>150 jd</p>
            </div>
          </div>
          <div class="item3">
            <button class="add-to-cart-button"><p>add to cart</p></button>
          </div>
        </div>
        <div class="product">
          <div class="item1">
            <img
              src="https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?q=80&w=1780&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
              alt=""
            />
          </div>
          <div class="item2">
            <div class="kalam1">
              <p>iphone</p>
            </div>
            <div class="kalam2">
              <p>900 jd</p>
            </div>
          </div>
          <div class="item3">
            <button class="add-to-cart-button"><p>add to cart</p></button>
          </div>
        </div>
        <div class="product">
          <div class="item1">
            <img
              src="https://images.unsplash.com/photo-1634306625570-2d21fb4b4781?q=80&w=1856&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
              alt=""
            />
          </div>
          <div class="item2">
            <div class="kalam1">
              <p>keyboard</p>
            </div>
            <div class="kalam2">
              <p>60 jd</p>
            </div>
          </div>
          <div class="item3">
            <button class="add-to-cart-button"><p>add to cart</p></button>
          </div>
        </div>
      </div>
      <div id="selected-products-container"></div>
      <div id="total-amount-container" class="total-container">
        <p>Total Amount: <span id="total-amount">0</span> jd</p>
      </div>
    </div>

    <script>
      const selectedProductsContainer = document.getElementById(
        "selected-products-container"
      );
      const totalAmountContainer = document.getElementById(
        "total-amount-container"
      );
      const totalAmountElement = document.getElementById("total-amount");
      let selectedProducts = [];

      document
        .querySelectorAll(".add-to-cart-button")
        .forEach((button, index) => {
          button.addEventListener("click", () => {
            const product = button.closest(".product");
            const imgSrc = product.querySelector("img").src;
            const name = product.querySelector(".kalam1 p").innerText;
            const price = parseInt(
              product.querySelector(".kalam2 p").innerText.split(" ")[0]
            );

            // Check if the product is already selected
            const existingProduct = selectedProducts.find(
              (p) => p.name === name
            );
            if (existingProduct) {
              existingProduct.quantity += 1;
              existingProduct.totalPrice += price;
            } else {
              selectedProducts.push({
                imgSrc,
                name,
                price,
                quantity: 1,
                totalPrice: price,
              });
            }

            renderSelectedProducts();
            updateTotalAmount();
          });
        });

      function renderSelectedProducts() {
        selectedProductsContainer.innerHTML = "";

        selectedProducts.forEach((product, index) => {
          const productContainer = document.createElement("div");
          productContainer.classList.add("selected-container");
          productContainer.innerHTML = `
                <div class="selected-item">
                    <img src="${product.imgSrc}" alt="${product.name}">
                    <p>${product.name}</p>
                </div>
                <div class="selected-item">
                    <p>Quantity: ${product.quantity}</p>
                </div>
                <div class="selected-item">
                    <p>Total: ${product.totalPrice} jd</p>
                </div>
                <button class="remove-button">X</button>`;

          productContainer
            .querySelector(".remove-button")
            .addEventListener("click", () => {
              selectedProducts.splice(index, 1);
              renderSelectedProducts();
              updateTotalAmount();
            });

          selectedProductsContainer.appendChild(productContainer);
        });
      }

      function updateTotalAmount() {
        const totalAmount = selectedProducts.reduce(
          (sum, product) => sum + product.totalPrice,
          0
        );
        totalAmountElement.innerText = totalAmount;
      }
    </script>
  </body>
</html>
